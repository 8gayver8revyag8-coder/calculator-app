<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°—É–ø–µ—Ä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#4a6fa5">
    <meta name="description" content="–ú–æ—â–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –Ω–∞—É—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–º –≤–∞–ª—é—Ç">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <style>
        /* –í–ï–°–¨ –í–ê–® CSS –ö–û–î –û–°–¢–ê–ï–¢–°–Ø –ó–î–ï–°–¨ –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
            transition: background 0.5s ease;
        }
        
        .app-container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: white;
        }
        
        .app-title {
            font-size: 1.5em;
            font-weight: 600;
        }
        
        .controls {
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .calculator {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        /* ... –ò –¢–ê–ö –î–ê–õ–ï–ï –í–ï–°–¨ –í–ê–® CSS ... */
        
    </style>
</head>
<body>
    <!-- –í–ï–°–¨ –í–ê–® HTML –ö–û–î –û–°–¢–ê–ï–¢–°–Ø –ó–î–ï–°–¨ -->
    <div class="app-container">
        <div class="header">
            <div class="app-title">–°—É–ø–µ—Ä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä Pro</div>
            <div class="controls">
                <button class="control-btn" onclick="toggleTheme()">üåì</button>
                <button class="control-btn" onclick="toggleSound()">üîä</button>
                <button class="control-btn" onclick="showHelp()">‚ùì</button>
            </div>
        </div>
        
        <div class="calculator">
            <div class="display-container">
                <div class="history" id="history"></div>
                <div class="display" id="display">0</div>
            </div>
            
            <div class="tabs">
                <div class="tab active" onclick="switchTab('basic')">–û–±—ã—á–Ω—ã–π</div>
                <div class="tab" onclick="switchTab('scientific')">–ù–∞—É—á–Ω—ã–π</div>
                <div class="tab" onclick="switchTab('converter')">–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä</div>
            </div>
            
            <!-- –í–°–ï –ö–ù–û–ü–ö–ò –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê -->
            <div id="basic-buttons" class="buttons">
                <button class="memory" onclick="memoryClear()">MC</button>
                <button class="memory" onclick="memoryRecall()">MR</button>
                <button class="memory" onclick="memoryAdd()">M+</button>
                <button class="memory" onclick="memorySubtract()">M-</button>
                
                <button class="clear" onclick="clearAll()">C</button>
                <button class="clear" onclick="backspace()">‚å´</button>
                <button class="operator" onclick="appendOperator('/')">√∑</button>
                <button class="operator" onclick="appendOperator('*')">√ó</button>
                
                <button class="number" onclick="appendNumber('7')">7</button>
                <button class="number" onclick="appendNumber('8')">8</button>
                <button class="number" onclick="appendNumber('9')">9</button>
                <button class="operator" onclick="appendOperator('-')">-</button>
                
                <button class="number" onclick="appendNumber('4')">4</button>
                <button class="number" onclick="appendNumber('5')">5</button>
                <button class="number" onclick="appendNumber('6')">6</button>
                <button class="operator" onclick="appendOperator('+')">+</button>
                
                <button class="number" onclick="appendNumber('1')">1</button>
                <button class="number" onclick="appendNumber('2')">2</button>
                <button class="number" onclick="appendNumber('3')">3</button>
                <button class="equals double-height" onclick="calculate()">=</button>
                
                <button class="number zero" onclick="appendNumber('0')">0</button>
                <button class="number" onclick="appendDecimal()">.</button>
                <button class="scientific" onclick="scientificFunction('percent')">%</button>
            </div>
            
            <!-- –ù–ê–£–ß–ù–´–ï –ö–ù–û–ü–ö–ò -->
            <div id="scientific-buttons" class="hidden">
                <div class="scientific-buttons">
                    <button class="scientific sci-small" onclick="scientificFunction('sqrt')">‚àö</button>
                    <button class="scientific sci-small" onclick="scientificFunction('square')">x¬≤</button>
                    <button class="scientific sci-small" onclick="scientificFunction('cube')">x¬≥</button>
                    <button class="scientific sci-small" onclick="scientificFunction('power')">x^y</button>
                    <button class="scientific sci-small" onclick="scientificFunction('log')">log</button>
                    
                    <button class="scientific sci-small" onclick="scientificFunction('sin')">sin</button>
                    <button class="scientific sci-small" onclick="scientificFunction('cos')">cos</button>
                    <button class="scientific sci-small" onclick="scientificFunction('tan')">tan</button>
                    <button class="scientific sci-small" onclick="scientificFunction('factorial')">x!</button>
                    <button class="scientific sci-small" onclick="scientificFunction('exp')">e^x</button>
                    
                    <button class="constant sci-small" onclick="appendConstant('pi')">œÄ</button>
                    <button class="constant sci-small" onclick="appendConstant('e')">e</button>
                    <button class="scientific sci-small" onclick="scientificFunction('ln')">ln</button>
                    <button class="scientific sci-small" onclick="scientificFunction('reciprocal')">1/x</button>
                    <button class="scientific sci-small" onclick="toggleNegative()">¬±</button>
                </div>
                
                <div class="buttons">
                    <button class="memory" onclick="memoryClear()">MC</button>
                    <button class="memory" onclick="memoryRecall()">MR</button>
                    <button class="memory" onclick="memoryAdd()">M+</button>
                    <button class="memory" onclick="memorySubtract()">M-</button>
                    
                    <button class="clear" onclick="clearAll()">C</button>
                    <button class="clear" onclick="backspace()">‚å´</button>
                    <button class="operator" onclick="appendOperator('/')">√∑</button>
                    <button class="operator" onclick="appendOperator('*')">√ó</button>
                    
                    <button class="number" onclick="appendNumber('7')">7</button>
                    <button class="number" onclick="appendNumber('8')">8</button>
                    <button class="number" onclick="appendNumber('9')">9</button>
                    <button class="operator" onclick="appendOperator('-')">-</button>
                    
                    <button class="number" onclick="appendNumber('4')">4</button>
                    <button class="number" onclick="appendNumber('5')">5</button>
                    <button class="number" onclick="appendNumber('6')">6</button>
                    <button class="operator" onclick="appendOperator('+')">+</button>
                    
                    <button class="number" onclick="appendNumber('1')">1</button>
                    <button class="number" onclick="appendNumber('2')">2</button>
                    <button class="number" onclick="appendNumber('3')">3</button>
                    <button class="equals double-height" onclick="calculate()">=</button>
                    
                    <button class="number zero" onclick="appendNumber('0')">0</button>
                    <button class="number" onclick="appendDecimal()">.</button>
                    <button class="scientific" onclick="scientificFunction('percent')">%</button>
                </div>
            </div>
            
            <!-- –ö–û–ù–í–ï–†–¢–ï–† -->
            <div id="converter-tab" class="hidden">
                <div class="converter">
                    <h3>üí± –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç</h3>
                    <div class="converter-row">
                        <input type="number" class="converter-input" id="converter-amount" placeholder="–°—É–º–º–∞" value="1000" min="0" step="0.01">
                        <select class="converter-select" id="converter-from">
                            <option value="RUB">RUB - –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å</option>
                            <option value="USD">USD - –î–æ–ª–ª–∞—Ä –°–®–ê</option>
                            <option value="EUR">EUR - –ï–≤—Ä–æ</option>
                            <option value="GBP">GBP - –§—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤</option>
                            <option value="JPY">JPY - –Ø–ø–æ–Ω—Å–∫–∞—è –∏–µ–Ω–∞</option>
                            <option value="CNY">CNY - –ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å</option>
                            <option value="CHF">CHF - –®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π —Ñ—Ä–∞–Ω–∫</option>
                            <option value="CAD">CAD - –ö–∞–Ω–∞–¥—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä</option>
                            <option value="AUD">AUD - –ê–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä</option>
                            <option value="TRY">TRY - –¢—É—Ä–µ—Ü–∫–∞—è –ª–∏—Ä–∞</option>
                        </select>
                    </div>
                    
                    <div class="converter-row" style="justify-content: center;">
                        <button class="swap-button" onclick="swapCurrencies()">‚áÖ</button>
                    </div>
                    
                    <div class="converter-row">
                        <select class="converter-select" id="converter-to">
                            <option value="USD">USD - –î–æ–ª–ª–∞—Ä –°–®–ê</option>
                            <option value="EUR">EUR - –ï–≤—Ä–æ</option>
                            <option value="RUB">RUB - –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å</option>
                            <option value="GBP">GBP - –§—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤</option>
                            <option value="JPY">JPY - –Ø–ø–æ–Ω—Å–∫–∞—è –∏–µ–Ω–∞</option>
                            <option value="CNY">CNY - –ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å</option>
                            <option value="CHF">CHF - –®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π —Ñ—Ä–∞–Ω–∫</option>
                            <option value="CAD">CAD - –ö–∞–Ω–∞–¥—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä</option>
                            <option value="AUD">AUD - –ê–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä</option>
                            <option value="TRY">TRY - –¢—É—Ä–µ—Ü–∫–∞—è –ª–∏—Ä–∞</option>
                        </select>
                    </div>
                    
                    <button class="number double-width" onclick="convertCurrency()" style="margin: 10px auto; display: block; padding: 15px;">
                        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª—é—Ç—É
                    </button>
                    
                    <button class="scientific double-width" onclick="updateRates()" style="margin: 0 auto; display: block; padding: 10px; font-size: 0.9em;">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã
                    </button>
                    
                    <div class="converter-result" id="converter-result">
                        –ù–∞–∂–º–∏—Ç–µ "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª—é—Ç—É"
                    </div>
                    <div class="converter-info" id="converter-info">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤...
                    </div>
                </div>
                
                <div class="converter" style="margin-top: 20px;">
                    <h3>üìè –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –µ–¥–∏–Ω–∏—Ü</h3>
                    
                    <div class="converter-row">
                        <input type="number" class="converter-input" id="unit-amount" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ" value="1" step="0.01">
                        <select class="converter-select" id="unit-type" onchange="changeUnitType()">
                            <option value="length">–î–ª–∏–Ω–∞</option>
                            <option value="weight">–í–µ—Å</option>
                            <option value="temperature">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</option>
                            <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                            <option value="volume">–û–±—ä–µ–º</option>
                        </select>
                    </div>
                    
                    <div class="converter-row">
                        <select class="converter-select" id="unit-from">
                            <!-- –û–ø—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </select>
                        <select class="converter-select" id="unit-to">
                            <!-- –û–ø—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </select>
                    </div>
                    
                    <button class="number double-width" onclick="convertUnits()" style="margin: 10px auto; display: block; padding: 15px;">
                        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–¥–∏–Ω–∏—Ü—ã
                    </button>
                    
                    <div class="converter-result" id="unit-result">
                        –í—ã–±–µ—Ä–∏—Ç–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø SERVICE WORKER –î–õ–Ø PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    })
                    .catch(function(error) {
                        console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ServiceWorker:', error);
                    });
            });
        }

        // –í–ï–°–¨ –í–ê–® JAVASCRIPT –ö–û–î –û–°–¢–ê–ï–¢–°–Ø –ó–î–ï–°–¨
        // –ú–∞–Ω–∏—Ñ–µ—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const manifest = {
            "name": "–°—É–ø–µ—Ä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä Pro",
            "short_name": "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä",
            "description": "–ú–æ—â–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –Ω–∞—É—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–º",
            "start_url": "/",
            "display": "standalone",
            "orientation": "portrait",
            "theme_color": "#4a6fa5",
            "background_color": "#ffffff",
            "icons": [
                {
                    "src": "icon-192.png",
                    "sizes": "192x192",
                    "type": "image/png"
                },
                {
                    "src": "icon-512.png",
                    "sizes": "512x512",
                    "type": "image/png"
                }
            ],
            "categories": ["utilities", "productivity"]
        };
        
        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
        let display = document.getElementById('display');
        let history = document.getElementById('history');
        let currentInput = '0';
        let previousValue = 0;
        let currentOperator = '';
        let shouldReset = false;
        let memory = 0;
        let isDarkTheme = false;
        let soundEnabled = true;
        let currentTab = 'basic';

        // ... –ò –î–ê–õ–ï–ï –í–ï–°–¨ –û–°–¢–ê–õ–¨–ù–û–ô JAVASCRIPT –ö–û–î ...
        // (–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏: updateDisplay(), appendNumber(), calculate() –∏ —Ç.–¥.)

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            // –í–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è init() –∏ –≤–µ—Å—å –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            updateDisplay();
            
            const savedTheme = localStorage.getItem('calculatorTheme');
            if (savedTheme === 'dark') {
                toggleTheme();
            }
            
            const savedSound = localStorage.getItem('calculatorSound');
            if (savedSound === 'false') {
                soundEnabled = false;
                updateSoundButton();
            }
            
            initUnitConverter();
            loadExchangeRates();
        };
    </script>
</body>
</html>